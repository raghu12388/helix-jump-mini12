<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stack Ball Mini</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  touch-action:none;
}
#score{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  font-size:18px;
  font-family:Arial;
}
#msg{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  color:white;
  font-size:24px;
  display:none;
}
</style>
</head>

<body>
<div id="score">Score: 0</div>
<div id="msg">GAME OVER<br>Tap to Restart</div>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let rings=[], score=0, gameOver=false;
const cx = canvas.width/2;
let ballY = canvas.height/4;
let velocity = 0;

const gravity = 0.6;     // ðŸ”¥ SLOW SPEED
const jumpForce = -12;   // ðŸ”¥ CONTROLLED JUMP

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener("resize",resize);

function createRings(){
  rings=[];
  for(let i=0;i<10;i++){
    rings.push({
      y: canvas.height/2 + i*120,
      gap: Math.random()*Math.PI*2
    });
  }
}
createRings();

addEventListener("pointerdown",()=>{
  if(gameOver){
    score=0;
    ballY = canvas.height/4;
    velocity=0;
    gameOver=false;
    document.getElementById("msg").style.display="none";
    createRings();
  }else{
    velocity = jumpForce;
  }
});

function drawCylinder(){
  ctx.fillStyle="#00e5ff";
  ctx.fillRect(cx-20,0,40,canvas.height);
}

function drawRings(){
  ctx.lineWidth=14;
  rings.forEach(r=>{
    ctx.strokeStyle="#00ff88";
    ctx.beginPath();
    ctx.arc(cx,r.y,70,r.gap+0.8,r.gap+5);
    ctx.stroke();
  });
}

function drawBall(){
  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.arc(cx+60,ballY,12,0,Math.PI*2);
  ctx.fill();
}

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawCylinder();
  drawRings();
  drawBall();

  velocity += gravity;
  ballY += velocity;

  rings.forEach(r=>{
    if(ballY > r.y-10 && ballY < r.y+10){
      velocity = jumpForce/1.2;
      score++;
      document.getElementById("score").innerText="Score: "+score;
    }
  });

  if(ballY > canvas.height){
    gameOver=true;
    document.getElementById("msg").style.display="block";
  }

  if(!gameOver) requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
