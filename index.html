<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stack Ball Mini</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin:0; background:#111; overflow:hidden; }
  canvas { display:block; margin:auto; }
  #ui {
    position:fixed; top:10px; left:50%;
    transform:translateX(-50%);
    color:#fff; font-family:sans-serif;
  }
</style>
</head>
<body>

<div id="ui">Tap / Click to Drop</div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

let centerX = canvas.width/2;
let centerY = 200;

let ballY = centerY - 60;
let velocity = 0;
let gravity = 0.35;
let isDropping = false;
let gameOver = false;

let rings = [];
let ringGap = 120;
let ringRadius = 80;

function createRings(){
  rings=[];
  for(let i=0;i<8;i++){
    rings.push({
      y: centerY + i*ringGap,
      gapAngle: Math.random()*Math.PI*2
    });
  }
}
createRings();

function drawBall(){
  ctx.beginPath();
  ctx.arc(centerX, ballY, 10, 0, Math.PI*2);
  ctx.fillStyle="red";
  ctx.fill();
}

function drawPole(){
  ctx.fillStyle="#00e5ff";
  ctx.fillRect(centerX-8,0,16,canvas.height);
}

function drawRings(){
  rings.forEach(r=>{
    ctx.lineWidth=16;
    ctx.strokeStyle="#00ff88";
    ctx.beginPath();
    ctx.arc(centerX, r.y, ringRadius, r.gapAngle+0.8, r.gapAngle+Math.PI*2-0.8);
    ctx.stroke();
  });
}

function update(){
  if(gameOver) return;

  if(isDropping){
    velocity += gravity;
    ballY += velocity;
  }

  rings.forEach(r=>{
    if(ballY+10 > r.y-8 && ballY-10 < r.y+8){
      // simple collision = fail
      gameOver=true;
      document.getElementById("ui").innerText="GAME OVER – Tap to Restart";
    }
  });

  if(ballY > canvas.height){
    gameOver=true;
    document.getElementById("ui").innerText="GAME OVER – Tap to Restart";
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPole();
  drawRings();
  drawBall();
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

addEventListener("click",()=>{
  if(gameOver){
    ballY=centerY-60;
    velocity=0;
    isDropping=false;
    gameOver=false;
    createRings();
    document.getElementById("ui").innerText="Tap / Click to Drop";
    return;
  }
  isDropping=true;
});
</script>

</body>
</html>
